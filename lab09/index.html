<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <!-- This is a process of defining all characters that help to show text exactly -->
    <title>Reads the XML data using JavaScript</title>

    <!-- CSS; This CSS is control entire table and button that how they exactly look like -->
    <style>
        /* Process of building table border in the single line*/
        table {
            border-collapse: collapse;
            width: 100%;
        }
        /* I have added padding and align towards the left to all table cell*/
        th,
        td {
            text-align: left;
            padding: 8px;
        }
        /* Applying background color because it makes every table row attractive and clearly readable*/
        tr:nth-child(even) {
            background-color: #7ce2af;  /* <-- added ; here */
        }
        /* Putting the table header background and text color*/
        th {
            background-color: #7c0f65;
            color: rgb(255, 255, 255);
        }
    
        /* Making stylish button by giving different colors*/
        .button {
            position: relative;
            text-align: center;
            padding: 20px;
            border: 4px solid rgb(55, 12, 211);
            background: rgba(20, 192, 4, 0.5);
            color: rgb(230, 36, 78);
            outline: none;
            border-radius: 30px;
            font-size: 30px;
            width: 500px;

        }

        .button:hover {
            color: black;
            background: white;
        }
    </style>

    <!-- JavaScript -->
<!-- 
    I have derived this JavaScript code from the Lab09 tutorial:
    https://www.geeksforgeeks.org/javascript/read-xml-file-and-print-the-details-as-tabular-data-by-using-javascript/tutorial
    The function of this code is to read my employee.xml file (external XML file) which is inside the Lab09 folder. 
    It uses XMLHttpRequest to display all the employee information in a properly formatted table on the web page.
-->
    <script>
        //The purpose of this function is to load my XML details when anyone click the button.
        function loadXMLDoc() {
            //To exchange details information in the web server I have Created an XMLHttpRequest object.
            let xmlhttp = new XMLHttpRequest();
            // Automatically setting up a function when the request state change.
            xmlhttp.onreadystatechange = function () {

                //Checking the result is completed or in completed and if completed (ready State==4)
                // When it display server response was completely successful (status==200)
                if (this.readyState == 4 && this.status == 200) {
                    //This line help to call empDetails() function that can exchange XML response to the further processing.
                    empDetails(this);
                }
            };

             // Basically it is making ready by typing = "GET", file = "employee.xml", asynchronous = true
            xmlhttp.open("GET", "employee.xml", true);
            // This line work to send HTTP request for server which fetch to the XML file.
            xmlhttp.send();
        }
        // When the system get XML response that is immediately builds an HTML table
        function empDetails(xml) {
            let i;
            //When it keeps the parsed XML content from the response that is using to build the first row of the table with the column headers.
            let xmlDoc = xml.responseXML;
            let table =
                `<tr>
                    <th>ID</th>
                    <th>Fullname</th>
                    <th>Position</th>
                    <th>Department</th>
                    <th>Room</th>
                </tr>`;   
            // Getting all the employees elements from the xml files 
            let x = xmlDoc.getElementsByTagName("employee");

             // Loops through each <employee> element to extract individual details
            for (i = 0; i < x.length; i++) {
                //This (<tr>) function to add new rows in the employees details information table cells (<td>)
                table += "<tr><td>" +
                    x[i].getAttribute("id") + "</td><td>" +
                    x[i].getElementsByTagName("fullname")[0]
                        .childNodes[0].nodeValue + "</td><td>" +
                    x[i].getElementsByTagName("position")[0]
                        .childNodes[0].nodeValue + "</td><td>" +
                    x[i].getElementsByTagName("department")[0]
                        .childNodes[0].nodeValue + "</td><td>" +
                    x[i].getElementsByTagName("room")[0]
                        .childNodes[0].nodeValue + "</td></tr>";
            }

            // Printing the xml information in table format.
            document.getElementById("id").innerHTML = table;
        }
    </script>
        <!-- 
   This webpage pulls employee details through the external XML fileâ€”employee.
   xml then show it in a neat HTML table when any user click the "Display Employees Details" button.
    JavaScript handles everything behind the scenes, using XMLHttpRequest to grab 
    and process the XML on the fly. I built this with some help and explanations from ChatGPT.
-->
    
</head>

<body> <!-- This is main content area of the webpage which is starting from here -->
    <!-- At the beginning, I used the <center> tag according to lab09 tutorial, but it did not work, so I asked for help from GPT AI and applied the suggestion it provided. -->
    <div>
        <button type="button" class="button" onclick="loadXMLDoc()"> <!-- When clicked it load loadXMLDoc() -->
            Display Employees Details
        </button>
    </div>

    <br><br><!-- Creating space between the button and the table -->
    <table id="id"></table> <!-- After displaying employee information it empty -->

</body>

</html>  <!-- Now completely ended the HTML document -->

